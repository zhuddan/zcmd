import { API_URL } from '@mini/service'
import { request } from '@mini/shared'

/**
 * 新增<%= businessName %>
 * @param data <%= businessName %>数据
 * @returns 新增<%= businessName %>
 */
export function add<%= public_sign %><%= model%>(data: Partial<Api.<%= model%>>) {
  return request.post({
    url: API_URL.<%= url_constant %>,
    data,
  })
}


// ************************************************
// ****************** hooks ***********************
// ************************************************


import { useMutation } from '@tanstack/react-query'
import { add<%= public_sign %><%= model%> } from '../api/<%= modelName %>'

/**
 * 新增<%= businessName %>的 Hook
 */
export function use<%= public_sign %>Add<%= model%>({
  onSuccess,
  onError,
}: {
  onSuccess?: () => void
  onError?: (error: Error) => void
} = {}) {
  return useMutation({
    mutationFn: async (data: Partial<Api.<%= model%>>) => {
      return await add<%= public_sign %><%= model%>(data)
    },
    onSuccess,
    onError,
  })
}
